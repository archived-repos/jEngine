/*! jengine 2015-05-09 */
!function(a,b){if("undefined"==typeof window)"undefined"!=typeof module&&(module.exports=b());else{var c=b();"function"==typeof fn?fn.define("jqlite",function(){return c}):"function"==typeof angular?angular.module("jqlite",[]).constant("jqlite",c):"function"==typeof define&&define.amd?define(["jqlite"],function(){return c}):a.jqlite=c,a.$||(a.$=c)}}(this,function(){"use strict";function a(a,b){for(var c=0,d=b.length;d>c;c++)a[c]=b[c];return a.length+=d,a}function b(b){switch(b[0]){case"#":var c=document.querySelector(b);if(c){var d=new f;return d[0]=c,d.length=1,d}return a(new f,document.querySelectorAll(b));case"<":k.innerHTML=b;var e=a(new f,k.children);return e;default:return a(new f,document.querySelectorAll(b))}}function c(b){if(b instanceof Array||b instanceof NodeList||b instanceof HTMLCollection)return a(new f,b);if(b===document||b instanceof HTMLElement||b instanceof Element){var c=new f;return c[0]=b,c.length=1,c}if(b instanceof Function)e(b);else if(void 0===b)return new f}function d(a){return"string"==typeof a?b(a):c(a)}function e(a){a instanceof Function&&(/loaded|complete/.test(document.readyState)?a():p(a))}function f(){}function g(a,b,c){var d=function(){o(a,b,d),c.apply(null,arguments)};return d}Element.prototype.matchesSelector||(Element.prototype.matchesSelector=Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector);var h=document.createEvent?function(a,b,c,d){var e=document.createEvent("HTMLEvents");return e.data=d,e.args=c,e.initEvent(b,!0,!0),a.dispatchEvent(e),e}:function(a,b,c,d){var e=document.createEventObject();return e.data=d,e.args=c,a.fireEvent("on"+b,e),e},i=eval,j=function(){},k=document.createElement("div"),l=document.createElement("div"),m=!!k.classList,n=j,o=j;if(k.addEventListener)n=function(a,b,c){c.$listener=function(a){c.apply(a.target,[a].concat(a.args))},a.addEventListener(b,c.$listener,!1)},o=function(a,b,c){a.removeEventListener(b,c.$listener||c,!1)};else{if(!document.body.attachEvent)throw"Browser not compatible with element events";n=function(a,b,c){c.$listener=function(a){c.apply(a.target,[a].concat(a.args))},a.attachEvent("on"+b,c.$listener,!1)},o=function(a,b,c){a.detachEvent("on"+b,c.$listener||c)}}d.noop=j;var p=window.addEventListener?function(a){window.addEventListener("load",a,!1)}:function(a){window.attachEvent("onload",a)};f.prototype=[],f.prototype.ready=e,d.fn=f.prototype,f.prototype.get=function(a){return a?this[a]:this},f.prototype.eq=function(a){if(!a instanceof Number)throw"number required";var b=0>a?this[this.length-a]:this[a],c=new f;return b&&(c[0]=b,c.length=1),c},f.prototype.find=function(a){var b,c,d,e=this,g=new f;if(/^\s*>/.test(a)&&(a=a.replace(/^\s*>\s*([^\s]*)\s*/,function(a,b){return e=e.children(b),""}),!a))return e;if(1===e.length){for(b=e[0].querySelectorAll(a),c=0,d=b.length;d>c;c++)g[c]=b[c];g.length=d}else if(e.length>1){var h,i;for(c=0,d=e.length;d>c;c++)for(b=e[c].querySelectorAll(a),h=0,i=b.length;i>h;h++)b.item(h).___found___||(g[g.length]=b.item(h),g.length++,b.item(h).___found___=!0);for(c=0,d=g.length;d>c;c++)delete g[c].___found___}return g},f.prototype.$=f.prototype.find,f.prototype.each=function(a){if(a instanceof Function)for(var b=0,c=this.length;c>b;b++)a.call(this[b],b,this[b]);return this},f.prototype.empty=function(){for(var a,b,c=0,d=this.length;d>c;c++)for(a=this[c],b=a.firstChild;b;)a.removeChild(b),b=a.firstChild;return this},f.prototype.filter=function(a){var b,c,d,e=new f;if(a instanceof Function)for(c=0,d=this.length,b;d>c;c++)b=this[c],a.apply(b,[b])&&e.push(b);else if("string"==typeof a)for(c=0,d=this.length,b;d>c;c++)b=this[c],Element.prototype.matchesSelector.call(b,a)&&e.push(b);return e},f.prototype.closest=function(a){var b,c,d,e=new f;if(!a)return this;if(1===this.length)for(d=this[0].parentElement;d;){if(d.matchesSelector(a)){e.push(d);break}d=d.parentElement}else if(this.length>1){for(b=0,c=this.length;c>b;b++)for(d=this[b].parentElement;d;){if(d.matchesSelector(a)){d.___found___||(d.___found___=!0,e.push(d));break}d=d.parentElement}for(b=0,c=e.length;c>b;b++)delete e[b].___found___}return e},f.prototype.children=k.children?function(b){for(var c=new f,d=0,e=this.length;e>d;d++)a(c,this[d].children);return b?c.filter(b):c}:function(a){var b=new f;return Array.prototype.forEach.call(this,function(a){for(a=a.firstElementChild||a.firstChild;a;)b[b.length]=a,a=a.nextElementSibling||a.nextSibling}),a?b.filter(a):b},f.prototype.contents=function(a){var b=new f;return Array.prototype.forEach.call(this,function(a){for(a=a.firstChild;a;)b[b.length]=a,a=a.nextSibling}),a?b.filter(a):b},f.prototype.clone=function(a,b){var c,d,e=new f;for(void 0===a&&(a=!0),c=0,d=this.length;d>c;c++)e[c]=this[c].cloneNode(a);return e.length=d,e},f.prototype.data=k.dataset?function(a,b){var c,d;if(void 0===b)return void 0===a?this[0]?this[0].dataset:{}:(this[0]||{}).dataset[a];for(c=0,d=this.length;d>c;c++)this[c].dataset[a]=b;return this}:function(a,b){var c,d;if(void 0===b){var e=[];for(c=0,d=this.length;d>c;c++)e.push(this[c].getAttribute("data-"+a));return(this[0]||{getAttribute:function(){return!1}}).getAttribute(a)}for(c=0,d=this.length;d>c;c++)this[c].setAttribute("data-"+a,b)},f.prototype.removeData=k.dataset?function(a){var b,c;if("string"==typeof a)for(b=0,c=this.length;c>b;b++)delete this[b].dataset[a];else if(a instanceof Array)for(b=0,c=a.length;c>b;b++)this.removeData(a[b]);return this}:function(a){var b,c;if("string"==typeof a)for(b=0,c=this.length;c>b;b++)this[b].removeAttribute("data-"+a);else if(a instanceof Array)for(b=0,c=a.length;c>b;b++)this.removeData(a[b]);return this},f.prototype.attr=function(a,b){var c,d;if(b instanceof Function)for(c=0,d=this.length;d>c;c++)this[c].setAttribute(a,b(c,this[c].getAttribute(a)));else if(void 0!==b)for(c=0,d=this.length;d>c;c++)this[c].setAttribute(a,b);else if(this[0])return this[0].getAttribute(a);return this},f.prototype.removeAttr=function(a){for(var b=0,c=this.length;c>b;b++)this[b].removeAttribute(a);return this},f.prototype.prop=function(a,b){var c,d;if(b instanceof Function)for(c=0,d=this.length;d>c;c++)this[c][a]=b(c,this[c][a]);else if(void 0!==b)for(c=0,d=this.length;d>c;c++)this[c][a]=b;else if(this[0])return this[0][a];return this},f.prototype.val=function(a){var b;if(void 0===a)return b=this[0],"select"===b.nodeName?b.options[b.selectedIndex].value:this[0].value||this[0].getAttribute("value");for(var c=0,d=this.length;d>c;c++)if("select"===this[c].nodeName){b=this[c];for(var e=0,f=b.options.length;f>e;e++)if(b.options[e].value===a){b.options[e].selected=!0;break}}else void 0!==this[c].value?this[c].value=a:this[c].setAttribute("value",a);return this},f.prototype.addClass=m?function(a){if(a.indexOf(" ")>=0){var b=$(this);a.split(" ").forEach(function(a){b.addClass(a)})}else for(var c=0,d=this.length;d>c;c++)this[c].classList.add(a);return this}:function(a){for(var b=new RegExp("\\b"+(a||"")+"\\b",""),c=0,d=this.length;d>c;c++)this[c].className=this[c].className.replace(b,"")+" "+a;return this},f.prototype.removeClass=m?function(a){if(a.indexOf(" ")>=0){var b=$(this);a.split(" ").forEach(function(a){b.removeClass(a)})}else for(var c=0,d=this.length;d>c;c++)this[c].classList.remove(a);return this}:function(a){for(var b=new RegExp("(\\b|\\s+)"+a+"\\b","g"),c=0,d=this.length;d>c;c++)this[c].className=this[c].className.replace(b,"");return this},f.prototype.hasClass=m?function(a){for(var b=0,c=this.length;c>b;b++)if(this[b].classList.item(a))return!0;return!1}:function(a){for(var b=new RegExp("\\b"+(a||"")+"\\b",""),c=0,d=this.length;d>c;c++)if(b.test(this[c].className))return!0;return!1},f.prototype.toggleClass=m?function(a,b){var c,d;if(void 0===a)for(c=0,d=this.length;d>c;c++)this[c].classList.item(a)?this[c].classList.remove(a):this[c].classList.add(a);else if(b)for(c=0,d=this.length;d>c;c++)this[c].classList.add(a);else for(c=0,d=this.length;d>c;c++)this[c].classList.remove(a);return this}:function(a,b){var c,d,e=new RegExp("\\b"+(a||"")+"\\b",""),f=new RegExp("\\b"+(a||"")+"\\b",""),g=new RegExp("(\\b|\\s+)"+a+"\\b","g");if(void 0===a)for(c=0,d=this.length;d>c;c++)e.test(this[c].className)?this[c].className=this[c].className.replace(g,""):this[c].className=this[c].className.replace(f,"")+" "+a;else if(b)for(c=0,d=this.length;d>c;c++)this[c].className=this[c].className.replace(f,"")+" "+a;else for(c=0,d=this.length;d>c;c++)this[c].className=this[c].className.replace(g,"");return this},f.prototype.append=function(a){var b,c,d,e,f,g,h=$(a);for(h.remove(),c=0,e=this.length;e>c;c++)for(b=c?h.clone(!0):h,g=this[c],d=0,f=b.length;f>d;d++)g.appendChild(b[d]);return this},f.prototype.prepend=function(a){var b,c,d,e,f,g,h,i=$(a);for(i.remove(),c=0,e=this.length;e>c;c++)if(b=c?i.clone(!0):i,g=this[c],h=g.firstChild)for(d=0,f=b.length;f>d;d++)g.insertBefore(b[d],h);else for(d=0,f=b.length;f>d;d++)g.appendChild(b[d]);return this},f.prototype.after=function(a){var b,c,d,e,f,g,h,i=$(a);for(i.remove(),c=0,e=this.length;e>c;c++)if(b=c?i.clone(!0):i,h=this[c].parentElement||this[c].parentNode,g=this[c].nextElementSibling||this[c].nextSibling)for(d=0,f=b.length;f>d;d++)h.insertBefore(b[d],g),g=b[d];else for(d=0,f=b.length;f>d;d++)h.appendChild(b[d]);return this},f.prototype.replaceWith=function(a){var b,c,d,e,f,g,h,i,j=$(a);for(j.remove(),c=0,e=this.length;e>c;c++)if(b=c?j.clone(!0):j,g=this[c],h=g.parentElement||parentNode,h.replaceChild(b[0],g),b[1])for(i=b[0],d=1,f=b.length;f>d;d++)h.insertBefore(b[d],i);return this},f.prototype.wrap=function(a){var b,c,d,e,f,g,h,i=$(a);for(i.remove(),c=0,e=this.length;e>c;c++){if(b=c?i.clone(!0):i,h=this[c].parentElement||this[c].parentNode,g=this[c].nextElementSibling||this[c].nextSibling)for(d=0,f=b.length;f>d;d++)h.insertBefore(b[d],g),g=b[d];else for(d=0,f=b.length;f>d;d++)h.appendChild(b[d]);if(b[0]){for(g=b[0];g.firstElementChild;)g=g.firstElementChild;g.appendChild(this[c])}}return this},f.prototype.next=function(a){for(var b,c=new f,d=0,e=this.length;e>d;d++)b=this.nextElementSibling||this.nextSibling,b&&c.push(this[d]);return"string"==typeof a?c.filter(a):c},f.prototype.parent=function(a){for(var b,c=new f,d=0,e=this.length;e>d;d++)b=this.parentElement||this.parentNode,b&&c.push(this[d]);return"string"==typeof a?c.filter(a):c},f.prototype.remove=function(a){for(var b,c=a?this.filter(a):this,d=0,e=c.length;e>d;d++)b=c[d].parentElement||c[d].parentNode,b&&b.removeChild(c[d]);return this},f.prototype.detach=function(a){for(var b=a?this.filter(a):this,c=new f,d=0,e=b.length;e>d;d++)l.appendChild(b[d]),c.push(b[d]);return c},f.prototype.css=function(a,b){if(b){for(var c=0,d=this.length;d>c;c++)this[c].style[a]=b;return this}return this[0]?this[0].style[a]||window.getComputedStyle(this[0])[a]:""},f.prototype.html=function(a){var b,c;if(void 0===a){for(a="",b=0,c=this.length;c>b;b++)text+=this[b].innerHTML;return this}if(a===!0){for(a="",b=0,c=this.length;c>b;b++)text+=this[b].outerHTML;return this}if(a instanceof Function){for(b=0,c=this.length;c>b;b++)this[b].innerHTML=a(b,this[b].innerHTML);return this}for(b=0,c=this.length;c>b;b++)this[b].innerHTML=a;return this.find("script").each(function(a){if("text/javascript"==a.type)try{i("(function(){ 'use strict';"+a.textContent+"})();")}catch(b){throw b.message}}),this},f.prototype.text=function(a){var b,c;if(void 0===a){for(a="",b=0,c=this.length;c>b;b++)a+=this[b].textContent;return this}if(a instanceof Function){for(b=0,c=this.length;c>b;b++)this[b].textContent=a(b,this[b].textContent);return this}for(b=0,c=this.length;c>b;b++)this[b].textContent=a;return this},f.prototype.on=function(a,b){var c,d;if("string"==typeof a){if(!(b instanceof Function))throw"listener needs to be a function";for(c=0,d=this.length;d>c;c++)n(this[c],a,b)}else if(a instanceof Array)for(c=0,d=a.length;d>c;c++)this.on(a[c],b);else if(a instanceof Object)for(c in a)this.on(c,a[c]);return this};var q={list:["click","focus","blur","submit"],define:function(a){f.prototype[a]=function(b){if(b)this.on(a,b);else for(var c=0,d=this.length;d>c;c++)this[c][a]();return this}},init:function(){for(var a=0,b=q.list.length;b>a;a++)q.define(q.list[a])}};return q.init(),f.prototype.once=function(a,b){var c,d;if("string"==typeof a){if(!(b instanceof Function))throw"listener needs to be a function";var e;for(c=0,d=this.length;d>c;c++)e=this[c],n(e,a,g(e,a,b))}else if(a instanceof Array)for(c=0,d=a.length;d>c;c++)this.once(a[c],b);else if(a instanceof Object)for(c in a)this.once(c,a[c]);return this},f.prototype.one=f.prototype.once,f.prototype.off=function(a,b){if("string"!=typeof a||!(b instanceof Function))throw"bad arguments";for(var c=0,d=this.length;d>c;c++)o(this[c],a,b);return this},f.prototype.trigger=function(a,b,c){if("string"!=typeof a)throw"bad arguments";for(var d=0,e=this.length;e>d;d++)h(this[d],a,b,c);return this},f.prototype.stopPropagation=function(){for(var a=0,b=arguments.length;b>a;a++)this.on(arguments[a],function(a){a.stopPropagation()})},d}),function(a){function b(a,d){"string"==typeof a&&d instanceof Function&&(b.widgets[a]=d,b.enabled?(console.log("running widget directly",a),c('[data-widget="'+a+'"]').each(d)):b.loading||(b.loading=!0,b.init()))}if(a.$){var c=a.$,d=c(document);c.plugin=function(a,b,e){"string"==typeof a&&b instanceof Function&&(c.plugin.cache[a]=b,c.plugin.cache[a]._collection=!!e),c.plugin.ready?c.plugin.run(d,a):c.plugin.loading||(c.plugin.loading=!0,c.plugin.init(d))},c.plugin.loading=!1,c.plugin.cache={},c.plugin.run=function(a,b){var d=c.plugin.cache[b],e=a.find(b);e.length&&(d._collection?d(e):e.each(d))},c.plugin.init=function(a){c(function(){for(var b in c.plugin.cache)c.plugin.run(a,b);c.plugin.loading=!1,c.plugin.ready=!0})},b.init=function(){c(function(){c.plugin("[data-widget]",function(){var a=this.getAttribute("data-widget");console.log("running widget",a),b.widgets[a]&&b.widgets[a].call(this)}),b.loading=!1,b.enabled=!0})},b.widgets={},c.widget=b;var e=c.fn.html;c.fn.html=function(a){e.apply(this,arguments),a&&c.plugin.init(this)}}}(this),function(){"use strict";function a(a){return function(b){return b instanceof a}}function b(a){return"string"==typeof a}function c(a,b){if(b)h[a]=b;else if(a)h[a]=k[a];else for(a in k)h[a]=k[a]}function d(a,c,e){return b(a)?void 0===c?k[a]:d.define(a,c,e):(d.run(a,c,e),d)}function e(a,b){m[a]=m[a]||[],m[a].push(b)}function f(a){var b=k[a];if(j(m[a]))for(var c=0,d=m[a].length;d>c;c++)m[a][c](b)}function g(a,b){k[a]=b,console.debug("fn defined: ",a),f(a),delete d.waiting[a]}var h="undefined"==typeof window?module.exports:window,i=a(Function),j=a(Array),k=(a(Object),{}),l=/^function[^\(]\(([^\)]*)/,m={};d.waiting={},d.run=function(a,b,c){return j(a)?void 0===b&&(b=a.pop()):i(a)&&(c=b,b=a,a=b.toString().match(l)[1].split(",")||[]),b instanceof Function&&d.require(a,b,c),d},d.define=function(a,c,e){if(b(a)){j(c)?void 0===e&&(e=c.pop()):i(c)&&(e=c,c=[],e.toString().replace(l,function(a,b){b=b.replace(/\s/g,""),b&&[].push.apply(c,b.split(","))})),d.waiting[a]=c,d.require(c,function(){var b=e.apply(k,arguments);b&&b.then instanceof Function?b.then(function(b){setTimeout(function(){g(a,b)},0)}):g(a,b)})}return d},d.require=function(a,c,f){if(!i(c))return!1;var g=function(){for(var b=0,d=a.length,e=[];d>b;b++)a[b]&&e.push(k[a[b]]);c.apply(f||k,e)};if(g.pending=0,g._try=function(){g.pending--,g.pending||g()},g._add=function(a){k[a]||(g.pending++,d.defer(function(){k[a]?g._try():e(a,g._try)}))},b(a)&&(a=[a]),j(a))if(a.length){for(var h=0,l=a.length;l>h;h++)a[h]&&g._add(a[h]);g.pending||g()}else g();return d},d.when=function(a,b,c){return i(b)&&(k[a]?b.apply(c,k[a]):e(a,function(a){b.apply(c,a)})),d},d.defer=function(a,b){return setTimeout(a,b||0),d},d.globalize=c,c("fn",d),h.define||(h.define=d.define),h.require||(h.require=d.require),"undefined"!=typeof window&&(d.load=window.addEventListener?function(a){return window.addEventListener("load",a,!1),d}:function(a){return window.attachEvent("onload",a),d}),d.ready=function(a){return a instanceof Function&&(/loaded|complete/.test(document.readyState)?a():d.load(a)),d},d.ready(function(){var a,b,c,e,f={};for(b in d.waiting)for(a=d.waiting[b],f[b]=[],c=0,e=a.length;e>c;c++)k[a[c]]||f[b].push(a[c]);if(Object.keys(f).length){console.group("missing dependencies");for(b in f)console.log(b,f[b]);console.groupEnd()}})}(),function(a,b){if("undefined"!=typeof module)module.exports=b();else if(a.define)define("$cookie",b);else if(a.angular){var c=b();angular.module("jstools.cookie",[]).provider("$cookie",function(){this.config=function(a){a.call(null,c)},this.$get=function(){return c}})}else a.$cookie||(a.$cookie=b())}(this,function(){"use strict";function a(b,c,d,e,f,g){return c?void a.set(b,c,d,e,f,g):a.get(b)}return a.get=function(a){return a?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},a.set=function(a,b,c,d,e,f){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var g="";if(c)switch(c.constructor){case Number:g=c===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c;break;case String:g="; expires="+c;break;case Date:g="; expires="+c.toUTCString()}return document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+g+(e?"; domain="+e:"")+(d?"; path="+d:"")+(f?"; secure":""),!0},a.remove=function(b,c,d){return a.hasKey(b)?(document.cookie=encodeURIComponent(b)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(d?"; domain="+d:"")+(c?"; path="+c:""),!0):!1},a.hasKey=function(a){return a?new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie):!1},a.keys=function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=a.length,c=0;b>c;c++)a[c]=decodeURIComponent(a[c]);return a},a}),function(a,b){"undefined"!=typeof module?module.exports=b():a&&(a.define?a.define("Events",function(){return b()}):a.angular?a.angular.module("jstools.events",[]).factory("Events",function(){return b(!0)}):a.Events||(a.Events=b()))}(this,function(a){"use strict";function b(a,b,c){return!b instanceof Function?!1:void a.push({handler:b,context:c})}function c(a,b,c){if(a){for(var d=0,e=a.length;e>d;d++)a[d].handler.apply(c,b);return e}}function d(a){a&&a.splice(0,a.length)}function e(a,b){if(a)for(var c=0,d=a.length;d>c;)a[c].handler===b?(a.splice(c,1),d--):c++}function f(a){a=a||this;var f={},h={};a[g.on]=function(a,c,d){f[a]=f[a]||[],b(f[a],c,d)},a[g.once]=function(a,c,d){h[a]=h[a]||[],b(h[a],c,d)},a[g.trigger]=function(a,b,d){c(f[a],b,d);var e=c(h[a],b,d);e&&h[a].splice(0,e)},a[g.off]=function(a,b){void 0===b?(d(f[a]),d(h[a])):(e(f[a],b),e(h[a],b))}}var g=a?{on:"$$on",once:"$$once",off:"$$off",trigger:"$$triger"}:{on:"on",once:"once",off:"off",trigger:"trigger"};return f}),function(a,b){"use strict";if("undefined"!=typeof a)if(a.define)define("$http",b);else if(a.angular){var c=b();angular.module("jstools.http",[]).provider(function(){this.config=function(a){a.call(null,c)},this.$get=function(){return c}})}else a.$http||(a.$http=b())}(this,function(){"use strict";function a(){for(var b,c=[],d=c.shift.call(arguments),e=c.shift.call(arguments);e;){for(b in e)d[b]instanceof Object&&e[b]instanceof Object?d[b]=a({},e[b]):d[b]=e[b];e=c.shift.call(arguments)}return d}function b(){for(var a=(arguments[0]||"").replace(/\/$/,""),b=1,c=arguments.length-1;c>b;b++)a+="/"+arguments[c].replace(/^\/|\/$/,"");return c&&(a+=arguments[c]?"/"+arguments[c].replace(/^\//,""):""),a}function c(a,b,d){if(a){if(b=b||"",d=d||0,a instanceof Function)return(d?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(a());if(a instanceof Object){var e="";for(var f in a)e+=c(a[f],(b?b+".":"")+f,d++);return e}return(d?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(a)}return""}function d(a){var b=a[0].toUpperCase()+a.substr(1);return b.replace(/([a-z])([A-Z])/,function(a,b,c){return b+"-"+c})}function e(a){var b=a[0].toLowerCase()+a.substr(1);return b.replace(/([a-z])-([A-Z])/,function(a,b,c){return b+c})}function f(a,b,c,d){var e=b.shift(),g=void 0;if(e||(e=b.$finally.shift()),e instanceof Function)e(c,a.status,a);else if(e instanceof Object&&(d&&e.resolve&&(g=e.resolve(c,a.status,a)),!d&&e.reject&&(g=e.reject(c,a.status,a)),g&&g.then)){if(b.forEach(function(a){g.then(a.resolve,a.reject)}),g["finally"])b.$finally.forEach(function(a){g["finally"](a.resolve,a.reject)});else if(b.$finally.length)throw"received promise not implements finally";e=!1}e&&f(a,b,void 0===g?c:g,d)}function g(a,b,c){a.headers={},a.getAllResponseHeaders().replace(/\s*([^\:]+)\s*\:\s*([^\;\n]+)/g,function(b,c,d){a.headers[e(c)]=d.trim()});var d=a.responseText;"application/json"===a.headers.contentType?d=JSON.parse(d):"application/xml"===a.headers.contentType&&(d=(new DOMParser).parseFromString(d,"text/xml")),c[a.status]?c[a.status].apply(a,[d,function(c){f(a,b,c,!0)},function(c){f(a,b,c,!0)}]):a.status>=200&&a.status<300?(a.$resolved=!0,f(a,b,d,!0)):f(a,b,d,!1)}function h(a){this.url=a}function i(e,f){if(e=e instanceof Array?b.apply(null,e):e,e instanceof Object&&(f=e,e=f.url),void 0===f)return new h(e);var j,k=a({},i.defaults),l={},m=[];for(j in f)f[j]instanceof Function&&(f[j]=f[j]()),k[j]instanceof Function&&(k[j]=k[j]()),"data"!==j&&f[j]instanceof Object?a(k[j],f[j]):k[j]=f[j];if(!e)throw"url missing";/^get$/.test(k.method)&&k.data instanceof Object&&Object.keys(k.data).length&&(console.log("options.data",k.data),e+="?"+c(k.data),k.data=null);var n=null;try{n=new XMLHttpRequest}catch(o){try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(o){n=new ActiveXObject("Microsoft.XMLHTTP")}}if(null===n)throw"Browser does not support HTTP Request";n.open(k.method.toUpperCase(),e,void 0===k.async?!0:k.async);for(j in k.headers)n.setRequestHeader(d(j),k.headers[j]);return n.onreadystatechange=function(){("complete"===n.readyState||4===n.readyState)&&g(n,m,l)},void 0!==k.data&&"string"!=typeof k.data&&(k.data=JSON.stringify(k.data)),n.send(k.data),n.then=function(a,b){return a instanceof Function&&m.push({resolve:a,reject:b}),n},n["catch"]=function(a){return a instanceof Function&&m.push({resolve:null,reject:a}),n},m.$finally=[],n["finally"]=function(a){return m.$finally.push(a),n},n}return["get","head","options","post","put","delete","patch"].forEach(function(a){h.prototype[a]=function(){var b=[this.url];return[].push.apply(b,arguments),i[a].apply(null,b)}}),i.defaults={method:"get",headers:{contentType:"application/json"}},["get","head","options","post","put","delete"].forEach(function(a){i[a]=function(c,d,e){return c=c instanceof Array?b.apply(null,c):c,c instanceof Object&&(e=c,c=e.url),e=e||{},e.data=d,e.method=a,i(c,e)}}),i.patch=function(c,d,e){if(c=c instanceof Array?b.apply(null,c):c,c instanceof Object)return c.method="patch",i(c);if("string"==typeof c){if(e=e instanceof Object?e:{},d)return i(c,a(e,{method:"patch",data:d}));var f=[],g=function(a){return f.push(a),h},h={add:function(a,b){return g({op:"add",path:a,value:b})},test:function(a,b){return g({op:"test",path:a,value:b})},replace:function(a,b){return g({op:"replace",path:a,value:b})},move:function(a,b){return g({op:"move",from:a,path:b})},copy:function(a,b){return g({op:"copy",from:a,path:b})},remove:function(a){return g({op:"remove",path:a})},flush:function(){return f.splice(0,f.length),h},submit:function(b){return b=b||f,i(c,a(e,{method:"patch",data:b}))}};return h}},i}),function(a,b){if("undefined"!=typeof module)module.exports=b(a);else if(a.define)a.define("$promise",function(){return b(a)});else if(a.angular){var c=b(a);a.angular.module("jstools.promise",[]).provider("$promise",function(){this.config=function(a){a.call(null,c)},this.$get=function(){return c}})}else a.$promise||(a.$promise=b(a))}(this,function(a){function b(a,b){b instanceof Function&&setTimeout(function(){b.apply(a,[function(b){a.resolve(b)},function(b){a.reject(b)}])},0)}function c(a,b){for(var c=a.shift();a.length;){if(c[b])return c;c=a.shift()}return c&&c[b]?c:!1}function d(a,b,d){var e=g[b],f=c(a.queue,e);if(f)a["[[PromiseStatus]]"]=b,void 0!==d&&(a["[[PromiseValue]]"]=d);else{if("rejected"===a["[[PromiseStatus]]"])throw new Error("unhandled promise");for(f=a.queue["finally"].shift();f;)f(d),f=a.queue["finally"].shift();f=!1}if(f&&f[e]){try{var h=f[e].call(a,d);a["[[PromiseStatus]]"]="fulfilled"}catch(i){a["[[PromiseStatus]]"]="rejected",a["[[PromiseValue]]"]=i,h=i}if(h&&h.then instanceof Function)h.then(function(b){return a.resolve(b),b},function(b){throw a.reject(b),b});else switch(a["[[PromiseStatus]]"]){case"fulfilled":a.resolve(void 0===h?d:h);break;case"rejected":a.reject(void 0===h?d:h)}}return a}function e(a,c){a.queue=[],a.queue["finally"]=[],a["[[PromiseStatus]]"]="pending",a["[[PromiseValue]]"]=void 0,b(a,c)}function f(b){return void 0===this||this===a?new f(b):void e(this,b)}var g={fulfilled:"then",rejected:"catch"};return f.prototype.then=function(a,b){return this.queue.push({then:a instanceof Function?a:!1,"catch":b instanceof Function?b:!1}),this},f.prototype["catch"]=function(a){return this.then(void 0,a),this},f.prototype["finally"]=function(a){return a instanceof Function&&this.queue["finally"].push(a),this},f.prototype.resolve=function(a){return d(this,"fulfilled",a)},f.prototype.reject=function(a){return d(this,"rejected",a)},f.defer=function(){var a=new f;return a.promise=a,a},f.when=function(a){var b=new f(function(c,d){a&&a.then?a.then(c,d):c(b,a)});return b},f.all=function(a){a=a instanceof Array?a:[];var b=a.length,c=[];return c.length=a.length,new f(function(d,e){return b?void a.forEach(function(a,f){a instanceof Object&&a.then?"fulfilled"===a["[[PromiseStatus]]"]?(c[f]=a["[[PromiseValue]]"],b--,b||d(c)):"reject"===a["[[PromiseStatus]]"]?e(a["[[PromiseValue]]"]):a.then(function(a){c[f]=a,b--,b||d(c)},e):(c[f]=a,b--,b||d(c))}):void d([])})},f}),function(a,b){"use strict";"undefined"!=typeof module?module.exports=b():a.define?define("Scope",b):a.Scope||(a.Scope=b())}(this,function(){"use strict";function a(a){return new Function("model","try{ with(model) { return ("+a+") }; } catch(err) { return ''; }")}var b=function(a){a instanceof Object&&this.$$extend(a)};return b.prototype.$$new=function(a){var b=function(){this.$$extend(a)};return b.prototype=this,new b(a)},b.prototype.$$extend=function(a){for(var b in a)this[b]=a[b];return this},b.prototype.$$eval=function(b){return a(b)(this)},b}),function(a,b){"use strict";if("undefined"!=typeof module)module.exports=b();else if(void 0!==a.define)a.define("$template",b);else if(a.angular){var c=b(a);a.angular.module("jstools.template",[]).provider("$template",function(){this.config=function(a){a.call(null,c)},this.$get=function(){return c}})}else void 0!==a.define?a.define("$template",b):a.$template||(a.$template=b())}(this,function(){"use strict";function a(){}function b(a){return function(b){return b instanceof a}}function c(a){return"string"==typeof a}function d(a){return new Function("model","try{ with(model) { return ("+a+") }; } catch(err) { return ''; }")}function e(a,b){if(!o(b))throw"handler should be a function";if(p(a))a.forEach(b);else if(q(a))for(var c in a)b.apply(null,[a[c],c])}function f(a,b){for(var c in b)a[c]=b[c]}function g(a){a instanceof Object&&f(this,a)}function h(a){if(!c(a))throw"template should be a string";var b=a.split(r),d=[b.shift()];a.replace(s,function(a,c,e,f,g,h){d.push(g?{cmd:"",expression:"/"}:h?{cmd:"",expression:"else"}:{cmd:e,expression:f}),d.push(b.shift())});var e=i(d,"root");return e}function i(a,b,c){b=(b||"").trim(),c=c||"";for(var d={content:[]},e="content",f=function(a){d[a]=[],e=a},g=a.shift();void 0!==g;){if("string"==typeof g)d[e].push(g);else if(q(g))if(g.cmd)if(t[g.cmd]&&t[g.cmd].standalone)d[e].push(new l(g.cmd,g.expression.replace(/\/$/,"")));else switch(g.cmd){case"case":case"when":f(g.expression);break;default:d[e].push("/"===g.expression.substr(-1)?new l(g.cmd,g.expression.replace(/\/$/,"")):i(a,g.cmd,g.expression))}else switch(g.expression){case"else":case"otherwise":f("otherwise");break;case"/":return new l(b,c,d);default:d[e].push(new l("var",g.expression))}g=a.shift()}return new l(b,c,d)}function j(a,b){var d="";return o(b)?b(a):p(b)?(b.forEach(function(e){c(e)?d+=e:e instanceof l?d+=e.render(a):p(e)&&(d+=j(a,b))}),d):b}function k(a){return function(b){return j(b,a)}}function l(b,c,d){this.cmd=b,this.expression=c,this.options={content:a,otherwise:a};for(var e in d)this.options[e]=k(d[e])}function m(a){var b=h(a),c=function(a){return b.render(a)};return c.compiled=b,c}function n(a,b){return void 0===b?a?n.cache[a]:void 0:(c(a)&&c(b)&&(n.cache[a]=m(b),n.cache[a].src=b),n.cache[a])}var o=b(Function),p=b(Array),q=b(Object);g.prototype.$new=function(a){var b=function(a){a instanceof Object&&f(this,a)};return b.prototype=this,new b(a)},g.prototype.$extend=function(a){return f(this,a)},g.prototype.$eval=function(a){return d(a)(this)};var r=/\$[\w\?]*{[^\}]+}|{[\$\/]}|{\:}/,s=/(\$([\w\?]*){([^\}]+)})|({[\$\/]})|({\:})/g,t={root:function(a){return this.content(a)},"var":function(a,b){return a.$eval(b)},"if":function(a,b){return a.$eval(b)?this.content(a):this.otherwise(a)}};t["?"]=t["if"],l.prototype.render=function(a){if(!o(t[this.cmd]))return"[command "+this.cmd+" not found]";var b=a instanceof g?a:new g(a),c=t[this.cmd].apply(this.options,[b,this.expression]),d=j(b,c);return void 0===d?"":d},m.cmd=function(a,b,d){c(a)&&o(b)&&(b.standalone=d,t[a]=b)},n.compile=m,n.cache={},n.cmd=m.cmd,n.helper=m.cmd;var u=/^(.*)(\,(.*))in(.*)$/,v=/^(.*)\bin\b(.*)$/,w=function(a,b,c,d){var f,g=this,h="",i=a.$eval(b);if(p(i))f="$index";else{if(!q(i))return console.warn("can not list",i),"";f="$key"}return e(i,function(b,e){var i={};i[c]=b,i[f]=e,d&&(i[d]=e),h+=g.content(a.$new(i))}),h};return n.cmd("each",function(a,b){var c;if(c=b.match(u))return w.call(this,a,c[4],c[1].trim(),c[3].trim());if(c=b.match(v))return w.call(this,a,c[2],c[1].trim());throw b+" malformed each expression"}),n.cmd("include",function(a,b){var c=n(b.trim());if(c)return c(a);if(c=n(a.$eval(b)))return c(a);throw"partial"+b+"not found"}),n}),function(a,b){"use strict";"undefined"!=typeof module?module.exports=b():a.define?a.define("$utils",b):a.angular?a.angular.module("jstools.utils",[]).factory(b):a.$utils||(a.$utils=b(),a._||(a._=a.$utils))}(this,function(){"use strict";function a(a){return function(b){return typeof b===a}}function b(a){return function(b){return b instanceof a}}function c(a,b,c){if(!a instanceof Object)return!1;var d,e=b.split(".");if(void 0!==c){if(e.length){d=e.shift();for(var f=e.shift();f;)a[d]||(a[d]={}),a=a[d],d=f,f=e.shift();return a[d]=c,c}return!1}for(var g=0,h=e.length,i=a||{};h>g;g++){if(d=e[g],!(d in i))return!1;i=i[e[g]]||{}}return i}function d(){for(var a,b=u.call(arguments),c=u.call(arguments);c;){if(typeof b!=typeof c&&(b=c instanceof Array?[]:c instanceof Object?{}:c),c instanceof Object)for(a in c)void 0!==c[a]&&(typeof b[a]!=typeof c[a]?b[a]=d(void 0,c[a]):b[a]instanceof Array?[].push.apply(b[a],c[a]):b[a]instanceof Object?b[a]=d(b[a],c[a]):b[a]=c[a]);c=u.call(arguments)}return b}function e(){for(var a,b=u.call(arguments),c=u.call(arguments);c;){for(a in c)typeof b[a]!=typeof c[a]?b[a]=c[a]:b[a]=c[a];c=u.call(arguments)}return b}function f(a){return d(void 0,a)}function g(){for(var a=(arguments[0]||"").replace(/\/$/,""),b=1,c=arguments.length-1;c>b;b++)a+="/"+arguments[c].replace(/^\/|\/$/,"");return c&&(a+=arguments[c]?"/"+arguments[c].replace(/^\//,""):""),a}function h(a,b){for(var c=a[0].apply(null,b),d=1,e=a.length;e>d;d++)c=a[d](c);return c}function i(a,b){for(var c=0,d=b.length;d>c;c++){if(!b[c]instanceof Function)throw"only Functions are allowed as pipe arguments";a.push(b[c])}}function j(a,b,c){for(var d=0,e=a.length;e>d;d++)b.apply(c,[a[d],d])}function k(a,b,c){for(var d in a)b.call(c,[a[d],d])}function l(a,b,c){a instanceof Array?j(a,b,c):a instanceof Object&&k(a,b,c)}function m(a,b){if(!(b instanceof Function))return a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(b(a[c]))return c;
return-1}function n(a,b){var c,d;if(b instanceof Function)for(c=0,d=a.length;d>c;c++)b(a[c])&&(a.splice(c,1),c--);else for(c=0,d=a.length;d>c;c++)a[c]===b&&(a.splice(c,1),c--)}function o(a,b){for(var c in b)if(a[c]!==b[c])return!1;return!0}function p(a,b){for(var c in b)if(a[c]===b[c])return!0;return!1}function q(a,b){for(var c=0,d=a.length;d>c;c++)if(o(a[c],b))return a[c];return!1}function r(a,b){for(var c=[],d=0,e=a.length;e>d;d++)o(a[d],b)&&c.push(a[d]);return c}function s(a){this.value=a}function t(a){return new s(a)}var u=[].shift,v={isFunction:a("function"),isString:a("string"),isNumber:a("number"),isArray:b(Array),isDate:b(Date),isRegExp:b(RegExp),isObject:function(a,b){return a instanceof Object?"any"===b?!0:typeof a===(b||"object"):!1},key:c,keys:Object.keys,extend:e,merge:d,copy:f,matchAll:o,matchAny:p,find:q,filter:r,joinPath:g,each:l,indexOf:m,remove:n,pipe:function(){var a=[];i(a,arguments);var b=function(){return h(a,arguments)};return b.pipe=function(){return i(a,arguments),b},b},chain:function(a){return new s(a)}};return j(["key","keys","each","indexOf","remove"],function(a){s.prototype[a]=function(){[].unshift.call(arguments,this.value),t[a].apply(null,arguments)}}),e(t,v),t}),fn.globalize(),this._||(this._=this.$utils);
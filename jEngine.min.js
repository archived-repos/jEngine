/*! jengine 2015-01-18 */
!function(){"use strict";Object.keys||(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),"bind"in Function.prototype||(Function.prototype.bind=function(a){var b=this;if(arguments.length<=1)return function(){return b.apply(a,arguments)};var c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(a,0===arguments.length?c:c.concat(Array.prototype.slice.call(arguments)))}}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(a,b){void 0===b&&(b=0),0>b&&(b+=this.length),0>b&&(b=0);for(var c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(a,b){for(void 0===b&&(b=this.length-1),0>b&&(b+=this.length),b>this.length-1&&(b=this.length-1),b++;b-->0;)if(b in this&&this[b]===a)return b;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;d>c;c++)c in this&&a.call(b,this[c],c,this)}),"map"in Array.prototype||(Array.prototype.map=function(a,b){for(var c=new Array(this.length),d=0,e=this.length;e>d;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c}),"filter"in Array.prototype||(Array.prototype.filter=function(a,b){for(var c,d=[],e=0,f=this.length;f>e;e++)e in this&&a.call(b,c=this[e],e,this)&&d.push(c);return d}),"every"in Array.prototype||(Array.prototype.every=function(a,b){for(var c=0,d=this.length;d>c;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=function(a,b){for(var c=0,d=this.length;d>c;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1})}(),function(){"use strict";var a=function(a,b){window.console[a].apply(window.console,b)},b=function(){},c=b,d=function(){c("log",Array.prototype.slice.call(arguments))};["info","warn","debug","error"].forEach(function(a){d[a]=void 0!==window.console?function(){c(a,Array.prototype.slice.call(arguments))}:b}),d.enable=function(e){e=void 0===e?!0:e,c=e&&void 0!==window.console?a:b,d("log is enabled")},d.clear=function(){d.history=[],window.console&&console.clear()},window.enableLog&&d.enable(),window.log=d}(),function(){"use strict";function a(b,c){if(c)a.define(b,c);else{if(d.isArray(b))return e[b];if(d.isString(b))return e[b];a.run(b)}}function b(a,b){h[a]=h[a]||[],h[a].push(b)}function c(a){if(d.isArray(h[a]))for(var b=0,c=h[a].length;c>b;b++)h[a][b]()}var d={isFunction:function(a){return a instanceof Function},isArray:function(a){return a instanceof Array},isString:function(a){return"string"==typeof a},isNumber:function(a){return a instanceof Number},isObject:function(a,b){return a instanceof Object?"any"===b?!0:typeof a===(b||"object"):!1},key:function(a,b,c){if(!a instanceof Object)return!1;var d=b.split("."),e=a||{};if(void 0!==c){if(d.length){for(var f,g=d.shift();f=d.shift();)a[g]||(a[g]={}),a=a[g],g=f;a[g]=c}return c}for(var g,h=0,i=d.length;i>h;h++){if(g=d[h],!(g in e))return!1;e=e[d[h]]||{}}return e},keys:Object.keys,globalize:function(a,b){("undefined"==typeof window?module.exports:window)[a]=b?b:e[a]}},e={_:d},f=/^function[^\(]\(([^\)]*)/,g=function(a,b){return!Object.keys(a).length&&d.isFunction(b)?(b(),!0):!1},h={};a.run=function(b){var c;d.isArray(b)?c=b.pop():d.isFunction(b)&&(c=b,b=c.toString().match(f)[1].split(",")),c instanceof Function&&a.require(b,function(){c.apply(e,this.injections)})},a.define=function(b,g){if(d.isString(b)){var h;d.isArray(g)?h=g.pop():d.isFunction(g)&&(h=g,g=[],h.toString().replace(f,function(a,b){b=b.replace(/\s/g,""),b&&b.replace(/([^,]+),?/,function(a,b){g.push(b)})})),a.require(g,function(){e[b]=h.apply(e,this.injections),log("fn defined: ",b),c(b)})}},a.require=function(b,c){if(!d.isFunction(c))return!1;var f=function(){for(var a=[],d=0,f=b.length;f>d;d++)a.push(e[b[d]]);c.call({injections:a})};if(d.isArray(b))if(b.length){for(var h={},i=0,j=b.length;j>i;i++)e[b[i]]||(h[b[i]]=!0);g(h,f)||b.forEach(function(b){a.when(b,function(){delete h[b],g(h,f)})})}else f();else d.isString(b)&&a.when(b,f)},a.when=function(a,c){d.isFunction(c)&&(e[a]?c():b(a,c))},a.defer=function(a){d.isFunction(a)&&setTimeout(a,0)},a.globalize=d.globalize,d.globalize("fn",a)}(),function(a,b){"undefined"==typeof window?"undefined"!=typeof module&&(module.exports=b()):"function"==typeof fn?fn.define("$",b):"function"==typeof angular?angular.module("jqlite",[]).constant("jqlite",b()):"function"==typeof define&&define.amd?define(["$"],b):(a.jqlite=b(),a.$||(a.$=a.jqlite))}(this,function(){"use strict";function a(a,b){for(var c=0,d=b.length;d>c;c++)a[c]=b[c];return a.length+=d,a}function b(b){switch(b[0]){case"#":var c=document.querySelector(b);if(c){var e=new f;return e[0]=c,e.length=1,e}return a(new f,document.querySelectorAll(b));case"<":k.innerHTML=b;var g=a(new f,k.children);return d.plugin.init(g),g;default:return a(new f,document.querySelectorAll(b))}}function c(b){if(b instanceof Array||b instanceof NodeList||b instanceof HTMLCollection)return a(new f,b);if(b===document||b instanceof HTMLElement||b instanceof Element){var c=new f;return c[0]=b,c.length=1,c}b instanceof Function&&e(b)}function d(a){return"string"==typeof a?b(a):c(a)}function e(a){if(a instanceof Function)e.ready?a.call(document):e.onceListeners.push(a);else if(void 0===a)return e.isReady}function f(){}function g(a,b,c){var d=function(){o(a,b,d),c()};return d}Element.prototype.matchesSelector||(Element.prototype.matchesSelector=Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector);var h=document.createEvent?function(a,b,c,d){var e=document.createEvent("HTMLEvents");return e.data=d,e.args=c,e.initEvent(b,!0,!0),a.dispatchEvent(e),e}:function(a,b,c,d){var e=document.createEventObject();return e.data=d,e.args=c,a.fireEvent("on"+b,e),e},i=eval,j=function(){},k=document.createElement("div"),l=document.createElement("div"),m=!!k.classList,n=j,o=j;if(k.addEventListener)n=function(a,b,c){c.$listener=function(a){c.apply(a.target,[a].concat(a.args))},a.addEventListener(b,c.$listener,!1)},o=function(a,b,c){a.removeEventListener(b,c.$listener||c,!1)};else{if(!document.body.attachEvent)throw"Browser not compatible with element events";n=function(a,b,c){c.$listener=function(a){c.apply(a.target,[a].concat(a.args))},a.attachEvent("on"+b,c.$listener,!1)},o=function(a,b,c){a.detachEvent("on"+b,c.$listener||c)}}d.fn=f.prototype,d.noop=j,e.isReady=!1,e.ready=function(){e.isReady=!0;for(var a=0,b=e.onceListeners.length;b>a;a++)e.onceListeners[a].call(document);e.onceListeners.splice(0,b)},e.onceListeners=[],document.addEventListener?(e._listener=function(){document.removeEventListener("DOMContentLoaded",e._listener,!1),e.ready()},document.addEventListener("DOMContentLoaded",e._listener,!1)):document.attachEvent&&(e._listener=function(){if("complete"===document.readyState){{arguments}document.detachEvent("onreadystatechange",e._listener),e.ready()}},document.attachEvent("onreadystatechange",e._listener)),f.prototype=[],f.prototype.ready=e,f.prototype.get=function(a){return a?this[a]:this},f.prototype.eq=function(a){var b=0>a?this[this.length-a]:this[a],c=new f;return b&&(c[0]=b),c},f.prototype.find=function(a){var b,c,d,e=new f;if(1===this.length){for(b=this[0].querySelectorAll(a),c=0,d=b.length;d>c;c++)e[c]=b[c];e.length=d}else if(this.length>1){var g,h;for(c=0,d=this.length;d>c;c++)for(b=this[c].querySelectorAll(a),g=0,h=b.length;h>g;g++)b.item(g).___found___||(e[e.length]=b.item(g),e.length++,b.item(g).___found___=!0);for(c=0,d=e.length;d>c;c++)delete e[c].___found___}return e},f.prototype.$=f.prototype.find,f.prototype.each=function(a){if(a instanceof Function)for(var b=0,c=this.length;c>b;b++)a.call(this[b],b,this[b]);return this},f.prototype.empty=function(a){if(a instanceof Function)for(var b,c,d=0,e=this.length;e>d;d++)for(b=this[d],c=b.firstChild;c;)b.removeChild(c),c=b.firstChild;return this},f.prototype.filter=function(a){var b,c,d,e=new f;if(a instanceof Function)for(c=0,d=this.length,b;d>c;c++)b=this[c],a.apply(b,[b])&&e.push(b);else if("string"==typeof a)for(c=0,d=this.length,b;d>c;c++)b=this[c],Element.prototype.matchesSelector.call(b,a)&&e.push(b);return e},f.prototype.closest=function(a){var b,c,d,e=new f;if(!a)return this;if(1===this.length)for(d=this[0].parentElement;d;){if(d.matchesSelector(a)){e.push(d);break}d=d.parentElement}else if(this.length>1){for(b=0,c=this.length;c>b;b++)for(d=this[b].parentElement;d;){if(d.matchesSelector(a)){d.___found___||(d.___found___=!0,e.push(d));break}d=d.parentElement}for(b=0,c=e.length;c>b;b++)delete e[b].___found___}return e},f.prototype.children=k.children?function(b){for(var c=new f,d=0,e=this.length;e>d;d++)a(c,this[d].children);return b?c.filter(b):c}:function(a){var b=new f;return Array.prototype.forEach.call(this,function(a){for(a=a.firstElementChild||a.firstChild;a;)b[b.length]=a,a=a.nextElementSibling||a.nextSibling}),a?b.filter(a):b},f.prototype.contents=function(a){var b=new f;return Array.prototype.forEach.call(this,function(a){for(a=a.firstChild;a;)b[b.length]=a,a=a.nextSibling}),a?b.filter(a):b},f.prototype.clone=function(a){var b,c,d=new f;for(void 0===a&&(a=!0),b=0,c=this.length;c>b;b++)d[b]=this[b].cloneNode(a);return d.length=c,d},f.prototype.data=k.dataset?function(a,b){var c,d;if(void 0===b)return void 0===a?this[0]?this[0].dataset:{}:(this[0]||{}).dataset[a];for(c=0,d=this.length;d>c;c++)this[c].dataset[a]=b;return this}:function(a,b){var c,d;if(void 0===b){var e=[];for(c=0,d=this.length;d>c;c++)e.push(this[c].getAttribute("data-"+a));return(this[0]||{getAttribute:function(){return!1}}).getAttribute(a)}for(c=0,d=this.length;d>c;c++)this[c].setAttribute("data-"+a,b)},f.prototype.removeData=k.dataset?function(a){var b,c;if("string"==typeof a)for(b=0,c=this.length;c>b;b++)delete this[b].dataset[a];else if(a instanceof Array)for(b=0,c=a.length;c>b;b++)this.removeData(a[b]);return this}:function(a){var b,c;if("string"==typeof a)for(b=0,c=this.length;c>b;b++)this[b].removeAttribute("data-"+a);else if(a instanceof Array)for(b=0,c=a.length;c>b;b++)this.removeData(a[b]);return this},f.prototype.attr=function(a,b){var c,d;if(b instanceof Function)for(c=0,d=this.length;d>c;c++)this[c].setAttribute(a,b(c,this[c].getAttribute(a)));else if(void 0!==b)for(c=0,d=this.length;d>c;c++)this[c].setAttribute(a,b);else if(this[0])return this[0].getAttribute(a);return this},f.prototype.removeAttr=function(a){for(var b=0,c=this.length;c>b;b++)this[b].removeAttribute(a);return this},f.prototype.prop=function(a,b){var c,d;if(b instanceof Function)for(c=0,d=this.length;d>c;c++)this[c][a]=b(c,this[c][a]);else if(void 0!==b)for(c=0,d=this.length;d>c;c++)this[c][a]=b;else if(this[0])return this[0][a];return this},f.prototype.val=function(a){var b;if(void 0===a)return b=this[0],"select"===b.nodeName?b.options[b.selectedIndex].value:this[0].value||this[0].getAttribute("value");for(var c=0,d=this.length;d>c;c++)if("select"===this[c].nodeName){b=this[c];for(var e=0,f=b.options.length;f>e;e++)if(b.options[e].value===a){b.options[e].selected=!0;break}}else void 0!==this[c].value?this[c].value=a:this[c].setAttribute("value",a);return this},f.prototype.addClass=m?function(a){for(var b=0,c=this.length;c>b;b++)this[b].classList.add(a);return this}:function(a){for(var b=new RegExp("\\b"+(a||"")+"\\b",""),c=0,d=this.length;d>c;c++)this[c].className=this[c].className.replace(b,"")+" "+a;return this},f.prototype.removeClass=m?function(a){for(var b=0,c=this.length;c>b;b++)this[b].classList.remove(a);return this}:function(a){for(var b=new RegExp("(\\b|\\s+)"+a+"\\b","g"),c=0,d=this.length;d>c;c++)this[c].className=this[c].className.replace(b,"");return this},f.prototype.hasClass=m?function(a){for(var b=0,c=this.length;c>b;b++)if(this[b].classList.item(a))return!0;return!1}:function(a){for(var b=new RegExp("\\b"+(a||"")+"\\b",""),c=0,d=this.length;d>c;c++)if(b.test(this[c].className))return!0;return!1},f.prototype.toggleClass=m?function(a,b){var c,d;if(void 0===a)for(c=0,d=this.length;d>c;c++)this[c].classList.item(a)?this[c].classList.remove(a):this[c].classList.add(a);else if(b)for(c=0,d=this.length;d>c;c++)this[c].classList.add(a);else for(c=0,d=this.length;d>c;c++)this[c].classList.remove(a);return this}:function(a,b){var c,d,e=new RegExp("\\b"+(a||"")+"\\b",""),f=new RegExp("\\b"+(a||"")+"\\b",""),g=new RegExp("(\\b|\\s+)"+a+"\\b","g");if(void 0===a)for(c=0,d=this.length;d>c;c++)this[c].className=e.test(this[c].className)?this[c].className.replace(g,""):this[c].className.replace(f,"")+" "+a;else if(b)for(c=0,d=this.length;d>c;c++)this[c].className=this[c].className.replace(f,"")+" "+a;else for(c=0,d=this.length;d>c;c++)this[c].className=this[c].className.replace(g,"");return this},f.prototype.append=function(a){var b,c,d,e,f,g,h=$(a);for(h.remove(),c=0,e=this.length;e>c;c++)for(b=h.clone(!0),g=this[c],d=0,f=b.length;f>d;d++)g.appendChild(b[d]);return this},f.prototype.prepend=function(a){var b,c,d,e,f,g,h,i=$(a);for(i.remove(),c=0,e=this.length;e>c;c++)if(b=i.clone(!0),g=this[c],h=g.firstChild)for(console.log(b),d=0,f=b.length;f>d;d++)g.insertBefore(b[d],h);else for(d=0,f=b.length;f>d;d++)g.appendChild(b[d]);return this},f.prototype.after=function(a){var b,c,d,e,f,g,h,i=$(a);for(i.remove(),c=0,e=this.length;e>c;c++)if(b=i.clone(!0),h=this[c].parentElement||this[c].parentNode,g=this[c].nextElementSibling||this[c].nextSibling)for(d=0,f=b.length;f>d;d++)h.insertBefore(b[d],g),g=b[d];else for(d=0,f=b.length;f>d;d++)h.appendChild(b[d]);return this},f.prototype.replaceWith=function(a){var b,c,d,e,f,g,h,i,j=$(a);for(j.remove(),c=0,e=this.length;e>c;c++)if(b=j.clone(!0),g=this[c],h=g.parentElement||parentNode,h.replaceChild(b[0],g),b[1])for(i=b[0],d=1,f=b.length;f>d;d++)h.insertBefore(b[d],i);return this},f.prototype.wrap=function(a){var b,c,d,e,f,g,h,i=$(a);for(i.remove(),c=0,e=this.length;e>c;c++){if(b=i.clone(!0),h=this[c].parentElement||this[c].parentNode,g=this[c].nextElementSibling||this[c].nextSibling)for(d=0,f=b.length;f>d;d++)h.insertBefore(b[d],g),g=b[d];else for(d=0,f=b.length;f>d;d++)h.appendChild(b[d]);if(b[0]){for(g=b[0];g.firstElementChild;)g=g.firstElementChild;g.appendChild(this[c])}}return this},f.prototype.next=function(a){for(var b,c=new f,d=0,e=this.length;e>d;d++)b=this.nextElementSibling||this.nextSibling,b&&c.push(this[d]);return"string"==typeof a?c.filter(a):c},f.prototype.parent=function(a){for(var b,c=new f,d=0,e=this.length;e>d;d++)b=this.parentElement||this.parentNode,b&&c.push(this[d]);return"string"==typeof a?c.filter(a):c},f.prototype.remove=function(a){for(var b,c=a?this.filter(a):this,d=0,e=c.length;e>d;d++)b=c[d].parentElement||c[d].parentNode,b&&b.removeChild(c[d]);return this},f.prototype.detach=function(a){for(var b=a?this.filter(a):this,c=new f,d=0,e=b.length;e>d;d++)l.appendChild(b[d]),c.push(b[d]);return c},f.prototype.css=function(a,b){if(b){for(var c=0,d=this.length;d>c;c++)this[c].style[a]=b;return this}return this[0]?this[0].style[a]||window.getComputedStyle(this[0])[a]:""},f.prototype.html=function(a){var b,c;if(void 0===a){for(a="",b=0,c=this.length;c>b;b++)text+=this[b].innerHTML;return this}if(a===!0){for(a="",b=0,c=this.length;c>b;b++)text+=this[b].outerHTML;return this}if(a instanceof Function){for(b=0,c=this.length;c>b;b++)this[b].innerHTML=a(b,this[b].innerHTML);return this}for(b=0,c=this.length;c>b;b++)this[b].innerHTML=a;return this.find("script").each(function(a){if("text/javascript"==a.type)try{i("(function(){ 'use strict';"+a.textContent+"})();")}catch(b){throw b.message}}),d.plugin.init(this),this},d.$doc=d(document),d.plugin=function(a,b,c){"string"==typeof a&&b instanceof Function&&(d.plugin.cache[a]=b,d.plugin.cache[a]._collection=!!c),e()?d.plugin.init(d.$doc):e(function(){d.plugin.init(d.$doc)})},d.plugin.cache={},d.plugin.init=function(a){var b,c,e,f=d.plugin.cache;for(b in f)c=f[b],e=a.find(b),e.length&&(c._collection?c(e):e.each(c))},d.widget=function(a,b,c){d.plugin('[data-widget="'+a+'"]',b,c)},f.prototype.text=function(a){var b,c;if(void 0===a){for(a="",b=0,c=this.length;c>b;b++)a+=this[b].textContent;return this}if(a instanceof Function){for(b=0,c=this.length;c>b;b++)this[b].textContent=a(b,this[b].textContent);return this}for(b=0,c=this.length;c>b;b++)this[b].textContent=a;return this},f.prototype.on=function(a,b){if("string"!=typeof a||!(b instanceof Function))throw"bad arguments";for(var c=0,d=this.length;d>c;c++)n(this[c],a,b)};var p={list:["click","focus","blur","submit"],define:function(a){f.prototype[a]=function(b){if(b)this.on(a,b);else for(var c=0,d=this.length;d>c;c++)this[c][a]()}},init:function(){for(var a=0,b=p.list.length;b>a;a++)p.define(p.list[a])}};return p.init(),f.prototype.one=function(a,b){if("string"!=typeof a||!(b instanceof Function))throw"bad arguments";for(var c,d=0,e=this.length;e>d;d++)c=this[d],n(c,a,g(c,a,b))},f.prototype.once=f.prototype.one,f.prototype.off=function(a,b){if("string"!=typeof a||!(b instanceof Function))throw"bad arguments";for(var c=0,d=this.length;d>c;c++)o(this[c],a,b)},f.prototype.trigger=function(a,b,c){if("string"!=typeof a)throw"bad arguments";for(var d=0,e=this.length;e>d;d++)h(this[d],a,b,c)},f.prototype.stopPropagation=function(){for(var a=0,b=arguments.length;b>a;a++)this.on(arguments[a],function(a){a.stopPropagation()})},d}),function(a){"undefined"==typeof window?"undefined"!=typeof module&&(module.exports=a):window.fn?fn.define("cookie",a):window.cookie||(window.cookie=a)}(function(){"use strict";function a(b,c,d,e,f,g){return c?void a.set(b,c,d,e,f,g):a.get(b)}return a.get=function(a){return a?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},a.set=function(a,b,c,d,e,f){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var g="";if(c)switch(c.constructor){case Number:g=1/0===c?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c;break;case String:g="; expires="+c;break;case Date:g="; expires="+c.toUTCString()}return document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+g+(e?"; domain="+e:"")+(d?"; path="+d:"")+(f?"; secure":""),!0},a.remove=function(b,c,d){return a.hasKey(b)?(document.cookie=encodeURIComponent(b)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(d?"; domain="+d:"")+(c?"; path="+c:""),!0):!1},a.hasKey=function(a){return a?new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie):!1},a.keys=function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=a.length,c=0;b>c;c++)a[c]=decodeURIComponent(a[c]);return a},a}),function(a){"undefined"==typeof window?"undefined"!=typeof module&&(module.exports=a()):window.fn?fn.define("Events",a):window.Events||(window.Events=a())}(function(){"use strict";function a(a,b,c){return!b instanceof Function?!1:void a.push({handler:b,context:c})}function b(a,b,c){if(a){for(var d=0,e=a.length;e>d;d++)a[d].handler.call(c,b);return e}}function c(a){a&&a.splice(0,a.length)}function d(a,b){if(a)for(var c=0,d=a.length;d>c;)a[c].handler===b?(a.splice(c,1),d--):c++}function e(e){e=e||this;var f={},g={};e.on=function(b,c,d){f[b]=f[b]||[],a(f[b],c,d)},e.once=function(b,c,d){g[b]=g[b]||[],a(g[b],c,d)},e.trigger=function(a,c,d){b(f[a],c,d);var e=b(g[a],c,d);e&&g[a].splice(0,e)},e.off=function(a,b){void 0===b?(c(f[a]),c(g[a])):(d(f[a],b),d(g[a],b))}}return e}),function(a){"use strict";if("undefined"!=typeof window)if(window.fn)fn.define("http",["Promise",a]);else{if("undefined"==typeof Promise)throw"Promise is required for http to be defined";window.http=a(Promise)}}(function(a){"use strict";function b(b,c){if(c||(c=b instanceof Object?b:{}),c.url&&(b=c.url),!b)return!1;c.method||(c.method="GET"),c.contentType||(c.contentType=/^json$/i.test(c.mode)?"application/json":"application/x-www-form-urlencoded"),/^json$/i.test(c.mode)&&isObject(c.data)&&(c.data=JSON.stringify(c.data));var d=null;try{d=new XMLHttpRequest}catch(e){try{d=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){d=new ActiveXObject("Microsoft.XMLHTTP")}}if(null===d)throw"Browser does not support HTTP Request";var f=new a(function(a,e){if(d.open(c.method,b,void 0===c.async?!0:c.async),d.onreadystatechange=function(){if("complete"==d.readyState||4==d.readyState)if(d.status>=200&&d.status<300){var b=/^json$/i.test(c.mode)?JSON.parse(d.responseText):/^xml$/i.test(c.mode)?d.responseXML:d.responseText;a(b,d.status,d)}else{var b=/^json$/i.test(c.mode)?JSON.parse(d.responseText):/^xml$/i.test(c.mode)?d.responseXML:d.responseText;e(b,d.status,d)}},d.setRequestHeader("Content-Type",c.contentType),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.headers)for(var f in c.headers)d.setRequestHeader(f,c.headers[f]);d.send(c.data)});return f.request=d,f}return b}),function(){function a(a){a.when||(a.when=function(b){return b=b||{},new a(function(a,c){b?"function"==typeof b.then?b.then(a,c):setTimeout(function(){a()},0):setTimeout(function(){c()},0)})})}if("undefined"==typeof window){var b=require("promise-es6").Promise;a(b),"undefined"!=typeof module&&(module.exports=b)}else{if("undefined"==typeof window.Promise)throw"Promise not found";a(window.Promise),"undefined"!=typeof fn&&fn.define("Promise",function(){return b})}}();